<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

</head>

<body>
    <py-config>
        packages = ["matplotlib", "pandas","numpy","opencv-python"]
    </py-config>

    <section class="pyscript">
        Hello world! <br>
        This is the current date and time, as computed by Python:
        <py-script>
            from datetime import datetime
            now = datetime.now()
            #display(now.strftime("%m/%d/%Y, %H:%M:%S"))

            import matplotlib.pyplot as plt
            import numpy as np
            def plot():
                plt.rcParams["figure.figsize"] = (22,20)
                fig, ax = plt.subplots()
                data = np.random.rand(100,100)
                plt.imshow(data)
                plt.title("Rating of ice cream flavours of your choice")
                display(fig, target="graph-area", append=False)
            plot()

            import js
            from pyodide.ffi import create_proxy

            def select_flavour(event):
                display(event.target.value,target="py_output", append=False)
            ele_proxy = create_proxy(select_flavour)

            flavour_elements = js.document.getElementsByName("flavour");
            for ele in flavour_elements:
                if ele.value == "ALL":
                    ele.checked = True
                    current_selected = ele.value
                ele.addEventListener("change", ele_proxy)
        </py-script>
    </section>
    <div id="input" style="margin: 20px;">
        Select your 🍨 flavour: <br/>
        <input type="radio" id="all" name="flavour" value="ALL">
        <label for="all"> All 🍧</label>
        <input type="radio" id="chocolate" name="flavour" value="COCOA">
        <label for="chocolate"> Chocolate 🍫</label>
        <input type="radio" id="cherrie" name="flavour" value="CHERRIES">
        <label for="cherrie"> Cherries 🍒</label>
        <input type="radio" id="berries" name="flavour" value="BERRY">
        <label for="berries"> Berries 🍓</label>
        <input type="radio" id="cheese" name="flavour" value="CHEESE">
        <label for="cheese"> Cheese 🧀</label>
        <input type="radio" id="peanut" name="flavour" value="PEANUT">
        <label for="peanut"> Peanut 🥜</label>
      </div>
      <textarea disabled id="py_output"></textarea>
    <div id="graph-area"></div>
</body>

</html>